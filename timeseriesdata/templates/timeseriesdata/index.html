<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.3/leaflet.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/c3/0.3.0/c3.min.css"/>
  </head>

  <body>

    <div id="chart"></div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/c3/0.3.0/c3.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.3/moment.min.js"></script>

    <script>

    $.get('/api/v1/timeseriesdata/log/?format=json', function(data){

      var x = ['x']
      var y = ['data']

     
      for (var i in data.objects){
        var dobj = data.objects[i];
        var m = moment( dobj.ts);
        x.push( m.milliseconds() + m.unix() );
        y.push( dobj.data );
      }


      var chart = c3.generate({
        data: {
          x: 'x',
          columns: [ x, y ]
        },
        bindto: "#chart"
      });
    });
    </script>


  </body>

</html>
